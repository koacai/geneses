dataset:
  corpus:
    _target_: lhotse_dataset.LibriTTSRMixClean

  shard_dir: /groups/gag51394/users/asai/dialogue-separator/libritts_r_mix_raw

  shard_maxcount:
    train: 100
    valid: 30
    test: 30

preprocess_datamodule:
  shard_dir: ${data.dataset.shard_dir}
  noise_dir: /groups/gag51394/users/asai/dataset_stripe/noise/
  rir_dir: /groups/gag51394/users/asai/dataset_stripe/rir/dns5_fullband/

  batch_size: 1
  num_workers: 32
  noise_pipeline_times: 1
  only_bg_noise: true

  shard_maxcount:
    train: 100
    valid: 30
    test: 30

  vae:
    ckpt_path: /groups/gag51394/users/asai/dacvae_l16_librispeech.pt
    hidden_size: 16
    max_duration: 20
    sample_rate: 16000
    noise_amp: 1e-4 # 0 paddingでは再構成できないため、微小なノイズを付与している

  ssl_model:
    name: facebook/w2v-bert-2.0
    sample_rate: 16000

  out_dir: /groups/gag51394/users/asai/dialogue-separator/libritts_r_mix_bg_noise

datamodule:
  train:
    dataset_dir: ${data.preprocess_datamodule.out_dir}/train/
    batch_size: 32
  valid:
    dataset_dir: ${data.preprocess_datamodule.out_dir}/valid/
    batch_size: 16
  test:
    dataset_dir: ${data.preprocess_datamodule.out_dir}/test/
    batch_size: 4
  num_workers: 8
  use_ddp: true
