dataset:
  libritts_r_shar_dir: /groups/gcb50354/kohei_asai/shar/libritts_r

  libritts_r_mix:
    _target_: lhotse_dataset.LibriTTSRMixLarge
    libritts_r_shar_dir: ${data.dataset.libritts_r_shar_dir}
    num_test_clean: 1000
    num_dev_clean: 5000
    num_train_clean_100: 500000
    num_train_clean_360: 1500000

  shard_dir: /groups/gag51394/users/asai/geneses/libritts_r_mix_raw

  shard_maxcount:
    train: 1000
    valid: 30
    test: 30

test_noise_dataset:
  corpus:
    _target_: lhotse_dataset.DEMAND
  shard_dir: /groups/gag51394/users/asai/geneses/demand
  shard_maxcount: 10

test_rir_dataset:
  corpus:
    _target_: lhotse_dataset.MITEnvironmentalImpulseResponses
  shard_dir: /groups/gag51394/users/asai/geneses/mit_environmental_impulse_responses
  shard_maxcount: 10

preprocess_datamodule:
  shard_dir: ${data.dataset.shard_dir}
  noise_dir: /groups/gcb50354/kohei_asai/dataset_stripe/noise/
  test_noise_dir: ${data.test_noise_dataset.shard_dir}
  test_rir_dir: ${data.test_rir_dataset.shard_dir}

  out_dir: /groups/gag51394/users/asai/geneses/libritts_r_mix_preprocess

  degradations:
    noise: 0.5
    reverb: 0.5
    band_limit: 0.5
    clip: 0.5
    codec: 0.5
    packet_loss: 0.5

  batch_size: 1
  num_workers: 32

  shard_maxcount:
    train: 1000
    valid: 30
    test: 30

  vae:
    hf_hub:
      repo_id: koacai/geneses
      filename: dacvae_l16_librittsr.pt
    hidden_size: 16
    max_duration: 20
    sample_rate: 24000
    noise_amp: 1e-4 # 0 paddingでは再構成できないため、微小なノイズを付与している

  ssl_model:
    name: facebook/w2v-bert-2.0
    sample_rate: 16000

datamodule:
  train:
    dataset_dir: ${data.preprocess_datamodule.out_dir}/train/
    batch_size: 32
  valid:
    dataset_dir: ${data.preprocess_datamodule.out_dir}/valid/
    batch_size: 16
  test:
    dataset_dir: ${data.preprocess_datamodule.out_dir}/test/
    batch_size: 32
  num_workers: 8
  use_ddp: true
