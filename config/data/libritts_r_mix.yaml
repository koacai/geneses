dataset:
  corpus:
    _target_: lhotse_dataset.LibriTTSRMixClean

  shar_dir: /groups/gag51394/users/asai/shar/libritts_r_mix_clean

preprocess:
  _target_: dialogue_separator.data.preprocessor.Preprocessor
  cfg:
    shar_dir: ${data.dataset.shar_dir}
    webdataset_dir: /groups/gag51394/users/asai/webdataset/dialogue-separator/libritts_r_mix
    device: cuda

    shard_size:
      train: 1e8
      valid: 3e6
      test: 3e6

    vae:
      ckpt_path: /groups/gag51394/users/asai/dacvae_l16_librispeech.pt
      hidden_size: 16
      max_duration: 20
      sample_rate: 16000

    noise_amp: 1e-4

datamodule:
  train:
    dataset_path: ${data.preprocess.cfg.webdataset_dir}/train/data-{000000..000219}.tar
    batch_size: 64
  valid:
    dataset_path: ${data.preprocess.cfg.webdataset_dir}/valid/data-{000000..000312}.tar
    batch_size: 16
  test:
    dataset_path: ${data.preprocess.cfg.webdataset_dir}/test/data-{000000..000290}.tar
    batch_size: 4
  num_workers: 8
  use_ddp: true

  vae: ${data.preprocess.cfg.vae}

  ssl_model:
    name: facebook/w2v-bert-2.0
    sample_rate: 16000
    layer: 13
